:root{
  --board-blue:#CFEFE9;
  --tile-bg:#FFFFFF;
  --edge-gap:3px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:#0e1217;
  color:#e6edf3;
}
header{
  max-width:1200px;margin:16px auto 8px;padding:0 12px;
  display:flex;flex-wrap:wrap;align-items:center;gap:12px
}
header h1{margin:0;font-weight:900;letter-spacing:.5px}
.hud{display:flex;gap:16px;margin-left:auto}
.metric{background:#141a22;border:1px solid #232a35;border-radius:10px;padding:8px 10px}
.metric span{display:block;color:#99a3af;font-size:12px}
.metric strong{font-size:16px}
.controls{display:flex;gap:8px}
.controls button{
  background:#1f6feb;border:1px solid #2f81f7;color:#fff;border-radius:8px;
  padding:8px 12px;font-weight:700;cursor:pointer
}
.controls button.disabled{opacity:.6;cursor:not-allowed}
.controls button#btn-new{background:#30363d;border-color:#6e7681}
main{max-width:1200px;margin:0 auto;padding:8px 12px 24px}

/* Stage wraps the board so we rotate the entire thing cleanly */
#board-wrap{display:grid;place-items:center}
.stage{
  position:relative;
  width:960px;height:960px;
  transform:rotate(0deg);
  transform-origin:center center;
  will-change: transform;            /* smoother rotation */
}

/* The grid lives inside the rotating stage */
.board{
  position:absolute; inset:0;
  display:grid;grid-template-columns:repeat(11,1fr);grid-template-rows:repeat(11,1fr);
  gap:var(--edge-gap);
  padding:6px;
  background:var(--board-blue);
  border-radius:18px;
  border:10px solid #000;
  box-shadow:0 16px 40px rgba(0,0,0,.45), inset 0 0 0 1px rgba(0,0,0,.06);
}

/* tiles */
.cell{position:relative;border-radius:12px;overflow:hidden}
.tile-inner{
  position:absolute;inset:0;background:var(--tile-bg);border-radius:12px;
  box-shadow:0 2px 5px rgba(0,0,0,.16), inset 0 0 0 1px rgba(0,0,0,.08);
  display:grid;grid-template-rows:var(--stripe-h,0px) auto 1fr;
}
.stripe{height:18px;background:var(--stripe,#000);border-bottom:1px solid rgba(0,0,0,.1)}
.stripe.ghost{background:transparent;border-bottom:0;--stripe-h:18px}
.title{
  padding:6px 6px 0 6px;text-align:center;text-transform:uppercase;
  font:800 12px/1.1 "Franklin Gothic Medium","Arial Narrow",Arial,Helvetica,sans-serif;
  color:#121212;letter-spacing:.4px
}
.emoji-wrap{display:grid;place-items:center;padding:2px 8px 8px 8px}
.emoji{font-size:24px;line-height:1}

.rot-0{transform:rotate(0deg)}
.rot-90{transform:rotate(90deg)}
.rot-180{transform:rotate(180deg)}
.rot-270{transform:rotate(270deg)}

/* center logo rotated -45deg */
.center-logo{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) rotate(-45deg);
  width:86%;height:86%;pointer-events:none;opacity:.95;z-index:1
}
.center-logo img{width:100%;height:100%;object-fit:contain;display:block}

/* pawn and dice */
.pawn{
  position:absolute;width:24px;height:24px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #d6dbe2);
  border:3px solid #050608;box-shadow:0 8px 22px rgba(0,0,0,.55), inset 0 0 4px rgba(0,0,0,.4);
  transform:translate(-9999px,-9999px);transition:transform 260ms ease;z-index:30
}

/* property type badge â€” bottom-left, above pawn */
.qbadge{
  position:absolute;
  left:6px; bottom:6px;
  z-index:40;
  font:900 10px/1 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:#fff;
  background:#111;
  border:1px solid rgba(255,255,255,.18);
  border-radius:6px;
  padding:3px 6px;
  letter-spacing:.3px;
  box-shadow:0 2px 4px rgba(0,0,0,.25);
  pointer-events:none;
}

/* dice overlay */
.dice-overlay{
  position:absolute;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.15);
  z-index:60
}
.dice-overlay.hidden{display:none}
.dice{
  width:72px;height:72px;background:#fff;border-radius:14px;
  box-shadow:0 10px 20px rgba(0,0,0,.35), inset 0 0 0 3px #151515;position:relative
}
.pip{position:absolute;width:10px;height:10px;border-radius:50%;background:#111}
.dice.face-1 .pip:nth-child(1){left:31px;top:31px}
.dice.face-2 .pip:nth-child(1){left:18px;top:18px}.dice.face-2 .pip:nth-child(2){left:44px;top:44px}
.dice.face-3 .pip:nth-child(1){left:18px;top:18px}.dice.face-3 .pip:nth-child(2){left:31px;top:31px}.dice.face-3 .pip:nth-child(3){left:44px;top:44px}
.dice.face-4 .pip:nth-child(1){left:18px;top:18px}.dice.face-4 .pip:nth-child(2){left:44px;top:18px}.dice.face-4 .pip:nth-child(3){left:18px;top:44px}.dice.face-4 .pip:nth-child(4){left:44px;top:44px}
.dice.face-5 .pip:nth-child(1){left:18px;top:18px}.dice.face-5 .pip:nth-child(2){left:44px;top:18px}.dice.face-5 .pip:nth-child(3){left:31px;top:31px}.dice.face-5 .pip:nth-child(4){left:18px;top:44px}.dice.face-5 .pip:nth-child(5){left:44px;top:44px}
.dice.face-6 .pip:nth-child(1){left:18px;top:16px}.dice.face-6 .pip:nth-child(2){left:44px;top:16px}.dice.face-6 .pip:nth-child(3){left:18px;top:30px}.dice.face-6 .pip:nth-child(4){left:44px;top:30px}.dice.face-6 .pip:nth-child(5){left:18px;top:46px}.dice.face-6 .pip:nth-child(6){left:44px;top:46px}

/* loading indicator */
#loading{
  position:absolute; right:12px; top:12px;
  display:flex; align-items:center; gap:8px;
  background:rgba(0,0,0,.45); color:#fff; padding:6px 10px; border-radius:10px;
  border:1px solid rgba(255,255,255,.18); z-index:70;
}
#loading.hidden{display:none}
.spinner{
  width:16px; height:16px; border-radius:50%;
  border:3px solid rgba(255,255,255,.35);
  border-top-color:#fff; animation:spin 0.9s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* outcome + modal */
.outcome{max-width:960px;margin:12px auto;padding:10px 12px;border-radius:10px;background:#141a22;border:1px solid #232a35}
.outcome.success{border-color:#238636}
.outcome.error{border-color:#f85149}
.outcome.warning{border-color:#d29922}
.hidden{display:none}

dialog{border:none;border-radius:16px;padding:0;background:#0b1117;color:#e6edf3;max-width:720px;width:90%}
#pending-form{padding:16px}
#pending-form h2{margin:0 0 8px}
#p-body{font-size:14px;color:#b6c2d0;margin-bottom:8px}
#p-answer{width:100%;min-height:140px;border-radius:10px;border:1px solid #232a35;background:#0e141b;color:#e6edf3;padding:8px}
.actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.actions .primary{background:#1f6feb;color:#fff;border:1px solid #2f81f7;border-radius:8px;padding:8px 12px}
